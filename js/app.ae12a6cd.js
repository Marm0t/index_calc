(function(e){function t(t){for(var c,r,a=t[0],s=t[1],l=t[2],d=0,p=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(c=!1)}c&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var c={},i={app:0},o=[];function r(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/index_calc/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7d05");var c=n("7a23"),i={class:"container",id:"app"},o=Object(c["f"])("h1",null,"Калькулятор индекса Мосбиржи",-1);function r(e,t,n,r,a,s){var l=Object(c["k"])("Calculator"),u=Object(c["k"])("IndexList");return Object(c["g"])(),Object(c["c"])("div",i,[o,Object(c["f"])(l,{onInputValueChanged:t[1]||(t[1]=function(t){return e.valueToPassToIndexList=t})}),Object(c["f"])(u,{sumToBuy:e.valueToPassToIndexList},null,8,["sumToBuy"])])}var a=Object(c["o"])("data-v-13acfb2d");Object(c["i"])("data-v-13acfb2d");var s={class:"card"},l={class:"form-control"},u=Object(c["f"])("h3",null,"Вы хотите следовать индексу Мосбиржи, но не хотите покупать ETF?",-1),d=Object(c["f"])("p",null,[Object(c["e"])("Этот калькулятор рассчитает сколько и каких акций нужно купить, чтобы максимально точно следовать индексу."),Object(c["f"])("br"),Object(c["e"])(" Сколько Вы хотите вложить?")],-1),p={key:0};Object(c["h"])();var h=a((function(e,t,n,i,o,r){return Object(c["g"])(),Object(c["c"])("div",s,[Object(c["f"])("div",l,[u,d,Object(c["n"])(Object(c["f"])("input",{type:"number",placeholder:o.inputValuePlaceholder,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.inputValue=e})},null,8,["placeholder"]),[[c["m"],o.inputValue]]),o.inputValue&&o.inputValue<1e5?(Object(c["g"])(),Object(c["c"])("p",p,"Внимание: чем выше сумма, тем точнее будет следование Индексу. Хорошо бы иметь миллион и более, но не у всех он есть :( ")):Object(c["d"])("",!0)])])})),b={name:"Calculator",data:function(){return{title:"Калькулятор индекса Мосбиржи",inputValuePlaceholder:"введите сумму в рублях",inputValue:""}},methods:{},watch:{inputValue:function(e){this.$emit("inputValueChanged",e)}}};n("8300");b.render=h,b.__scopeId="data-v-13acfb2d";var f=b,g=Object(c["o"])("data-v-173abe9b");Object(c["i"])("data-v-173abe9b");var O={class:"card"},k={class:"form-control"},j={key:0},m={key:1,class:"responsive-table"},w={class:"table-header list-item"},v=Object(c["f"])("div",{class:"col col-2"},"Название",-1),y=Object(c["f"])("div",{class:"col col-4"},"Цена за штуку",-1),C=Object(c["f"])("div",{class:"col col-6"},"Сумма",-1),T={class:"col col-1","data-label":"ticker"},_={class:"col col-2","data-label":"company_name"},x={class:"col col-3","data-label":"weight"},S={class:"col col-4","data-label":"last_price"},B={class:"col col-5","data-label":"need_buy"},P={class:"col col-6"},M={key:2};Object(c["h"])();var N=g((function(e,t,n,i,o,r){return Object(c["g"])(),Object(c["c"])("div",O,[Object(c["f"])("div",k,[n.sumToBuy?(Object(c["g"])(),Object(c["c"])("p",j," Чтобы следовать индексу Мосбиржи имея лишь "+Object(c["l"])(n.sumToBuy)+" рублей, Вам необходимо преобрести акций в соответствии с таблицей ",1)):Object(c["d"])("",!0),0!==o.indexComponents.length?(Object(c["g"])(),Object(c["c"])("ul",m,[Object(c["f"])("li",w,[Object(c["f"])("div",{class:"col col-1 sort",onClick:t[1]||(t[1]=function(){var e;return o.indexComponents.sortConponentsByTicker&&(e=o.indexComponents).sortConponentsByTicker.apply(e,arguments)})},"Тикер"),v,Object(c["f"])("div",{class:"col col-3 sort",onClick:t[2]||(t[2]=function(){var e;return o.indexComponents.sortConponentsByWeight&&(e=o.indexComponents).sortConponentsByWeight.apply(e,arguments)})},"Вес"),y,Object(c["f"])("div",{class:"col col-5 sort",onClick:t[3]||(t[3]=function(){var e;return o.indexComponents.sortConponentsByNeedBuy&&(e=o.indexComponents).sortConponentsByNeedBuy.apply(e,arguments)})},"Купить штук"),C]),(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["j"])(o.indexComponents,(function(e,t){return Object(c["g"])(),Object(c["c"])("li",{class:"table-row list-item",key:t,onClick:function(e){return r.itemClicked(t)}},[Object(c["f"])("div",T,Object(c["l"])(e.ticker),1),Object(c["f"])("div",_,Object(c["l"])(e.company_name),1),Object(c["f"])("div",x,Object(c["l"])(e.weight),1),Object(c["f"])("div",S,Object(c["l"])(e.last_price),1),Object(c["f"])("div",B,Object(c["l"])(e.need_buy),1),Object(c["f"])("div",P,Object(c["l"])(e.need_buy?Math.round(e.need_buy*e.last_price):""),1)],8,["onClick"])})),128))])):(Object(c["g"])(),Object(c["c"])("div",M," Список пуст "))])])})),F=(n("4e82"),n("159b"),n("7db0"),n("bc3a")),L=n.n(F),R="https://iss.moex.com/iss/engines/stock/markets/shares/boards/TQBR/securities.json?marketdata.columns=LAST&securities.columns=SECID,SHORTNAME,SECNAME,LOTSIZE&iss.meta=off&iss.only=marketdata,securities&securities=",I=[{ticker:"AFKS",weight:"0.5"},{ticker:"AFLT",weight:"0.35"},{ticker:"ALRS",weight:"1.69"},{ticker:"CBOM",weight:"0.2"},{ticker:"CHMF",weight:"1.63"},{ticker:"DSKY",weight:"0.41"},{ticker:"FEES",weight:"0.25"},{ticker:"FIVE",weight:"1.4"},{ticker:"FIXP",weight:"0.57"},{ticker:"GAZP",weight:"15.45"},{ticker:"GLTR",weight:"0.27"},{ticker:"GMKN",weight:"7.17"},{ticker:"HHRU",weight:"0.42"},{ticker:"HYDR",weight:"0.45"},{ticker:"IRAO",weight:"0.8"},{ticker:"LKOH",weight:"11.28"},{ticker:"LSRG",weight:"0.17"},{ticker:"MAGN",weight:"0.7"},{ticker:"MAIL",weight:"0.89"},{ticker:"MGNT",weight:"1.74"},{ticker:"MOEX",weight:"1.25"},{ticker:"MTSS",weight:"1.41"},{ticker:"NLMK",weight:"1.56"},{ticker:"NVTK",weight:"5.13"},{ticker:"OZON",weight:"0.79"},{ticker:"PHOR",weight:"0.81"},{ticker:"PIKK",weight:"0.65"},{ticker:"PLZL",weight:"2.13"},{ticker:"POGR",weight:"0.31"},{ticker:"POLY",weight:"2.9"},{ticker:"ROSN",weight:"3.37"},{ticker:"RSTI",weight:"0.15"},{ticker:"RTKM",weight:"0.47"},{ticker:"RUAL",weight:"0.65"},{ticker:"SBER",weight:"13"},{ticker:"SBERP",weight:"1.17"},{ticker:"SNGS",weight:"1.55"},{ticker:"SNGSP",weight:"1.15"},{ticker:"TATN",weight:"1.79"},{ticker:"TATNP",weight:"0.35"},{ticker:"TCSG",weight:"3.89"},{ticker:"TRNFP",weight:"0.48"},{ticker:"VTBR",weight:"1.13"},{ticker:"YNDX",weight:"7.56"}];function E(e,t){return e.ticker<t.ticker?-1:e.ticker>t.ticker?1:0}function A(e,t){return parseFloat(e.weight)<parseFloat(t.weight)?1:parseFloat(e.weight)>parseFloat(t.weight)?-1:0}function V(e,t){return parseFloat(e.need_buy)<parseFloat(t.need_buy)?1:parseFloat(e.need_buy)>parseFloat(t.need_buy)?-1:0}I.sortConponentsByTicker=function(){return this.asc=!this.asc,this.asc?this.sort(E):this.reverse(E)},I.sortConponentsByWeight=function(){return this.asc=!this.asc,this.asc?this.sort(A):this.reverse(A)},I.sortConponentsByNeedBuy=function(){return this.asc=!this.asc,this.asc?this.sort(V):this.reverse(V)};var G={name:"IndexList",props:["sumToBuy"],data:function(){return{title:"",indexComponents:I}},methods:{itemClicked:function(e){console.log("Someone clicked on ",this.indexComponents[e].ticker)},updateDataFromMicex:function(){var e=this,t="";this.indexComponents.forEach((function(e){t=t+","+e.ticker})),console.log("Updating components by calling "+R+t),L.a.get(R+t).then((function(t){e.indexComponents.forEach((function(e){t.data.securities.data.find((function(n,c){if(n[0]==e.ticker)return e["last_price"]=t.data.marketdata.data[c][0],e["company_name"]=t.data.securities.data[c][1],e["lot_size"]=t.data.securities.data[c][3],!0}))}))})).catch((function(e){return console.log(e)}))},updateDataWithNeedBuy:function(e){console.log("Updating need_buy based on total value ",e),this.indexComponents.forEach((function(t){t.need_buy=Math.floor(Math.round(e*(parseFloat(t.weight)/100)/t.last_price)/t.lot_size)*t.lot_size}))}},computed:{},watch:{indexComponents:function(e){console.log("indexComponents changed to: ",e)},sumToBuy:function(e){this.updateDataWithNeedBuy(e)}},mounted:function(){this.updateDataFromMicex()}};n("adf3");G.render=N,G.__scopeId="data-v-173abe9b";var K=G,D={name:"App",components:{Calculator:f,IndexList:K},data:function(){return{valueToPassToIndexList:0}}};n("77c0");D.render=r;var H=D;Object(c["b"])(H).mount("#app")},6599:function(e,t,n){},"77c0":function(e,t,n){"use strict";n("d892")},"7d05":function(e,t,n){},8300:function(e,t,n){"use strict";n("c75a")},adf3:function(e,t,n){"use strict";n("6599")},c75a:function(e,t,n){},d892:function(e,t,n){}});
//# sourceMappingURL=app.ae12a6cd.js.map